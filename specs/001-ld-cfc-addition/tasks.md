# 任务清单：IEC61131-3 LD/CFC 加法示例

**功能**: 001-ld-cfc-addition
**日期**: 2026-01-18
**输入**: 设计文档来自 `/specs/001-ld-cfc-addition/`

**实现方法**: 手动创建PLCopen XML文件（零依赖），完整中文文档

## 阶段1：项目设置

- [ ] T001 创建 examples/ 目录结构：ld/、cfc/、shared/
- [ ] T002 [P] 创建 examples/shared/schemas/ 目录
- [ ] T003 [P] 创建 examples/shared/docs/ 目录
- [ ] T004 [P] 在仓库根目录创建 docs/ 目录

## 阶段2：基础设施

**⚠️ 关键**: 必须在用户故事实现前完成

- [ ] T005 [P] 创建溢出行为文档在 examples/shared/docs/overflow-behavior.md
- [ ] T006 [P] 创建工具兼容性指南在 examples/shared/docs/tool-compatibility.md
- [ ] T007 [P] 创建主README文档在 docs/README.md

**检查点**: 基础设施就绪

---

## 阶段3：用户故事1 - LD梯形图示例 (优先级P1) 🎯 MVP

**目标**: 创建LD梯形图加法示例程序

**独立测试**: 导入addition.xml到CODESYS工具，设置A=10和B=20，验证Result=30

- [ ] T008 [P] [US1] 创建测试用例文件 test-cases.json 在 examples/ld/
- [ ] T009 [US1] 创建LD程序XML文件框架 addition.xml 在 examples/ld/
- [ ] T010 [US1] 在addition.xml中添加变量声明（输入：A、B；输出：Result）
- [ ] T011 [US1] 在addition.xml中添加LD梯形图逻辑（ADD功能块）
- [ ] T012 [US1] 在addition.xml中添加中文注释说明
- [ ] T013 [US1] 创建LD示例说明文档 addition.md 在 examples/ld/（使用指南）
- [ ] T014 [US1] 在addition.md中添加测试用例示例

**检查点**: LD示例完成且可独立测试

---

## 阶段4：用户故事2 - CFC功能块图示例 (优先级P2)

**目标**: 创建CFC功能块图加法示例程序

**独立测试**: 导入addition.xml到CODESYS工具，设置A=7和B=8，验证Result=15

- [ ] T015 [P] [US2] 创建测试用例文件 test-cases.json 在 examples/cfc/
- [ ] T016 [US2] 创建CFC程序XML文件框架 addition.xml 在 examples/cfc/
- [ ] T017 [US2] 在addition.xml中添加变量声明（与LD示例相同）
- [ ] T018 [US2] 在addition.xml中添加CFC功能块图逻辑（ADD功能块）
- [ ] T019 [US2] 在addition.xml中添加中文注释说明
- [ ] T020 [US2] 创建CFC示例说明文档 addition.md 在 examples/cfc/（使用指南）
- [ ] T021 [US2] 在addition.md中添加LD与CFC的对比说明

**检查点**: CFC示例完成且可独立测试

---

## 阶段5：完善与验证

- [ ] T022 [P] 更新 docs/README.md 完整使用指南
- [ ] T023 [P] 验证所有文件使用UTF-8编码（无BOM）
- [ ] T024 [P] 验证所有文件使用LF换行符
- [ ] T025 [P] 检查中文注释覆盖率（目标100%）
- [ ] T026 测试导入到开发工具（CODESYS或TIA Portal）
- [ ] T027 手动运行所有测试用例并记录结果

---

## 依赖关系与执行顺序

### 阶段依赖

```
阶段1（项目设置）
    ↓
阶段2（基础设施）← 阻塞所有用户故事
    ↓
    ├─→ 阶段3（US1: LD示例）─┐
    └─→ 阶段4（US2: CFC示例）─┤
                              ↓
                      阶段5（完善）
```

### 用户故事依赖

- **用户故事1（P1）**: LD梯形图示例
  - 依赖：阶段2（基础设施）完成
  - 与其他故事无依赖
  - **MVP**: 仅此故事即可交付完整示例

- **用户故事2（P2）**: CFC功能块图示例
  - 依赖：阶段2（基础设施）完成
  - 与US1无依赖（可并行开发）
  - **价值**: 提供对比学习

### 阶段内任务顺序

**LD示例（US1）**:
```
T008（测试用例）- 可随时执行
T009（XML框架）→ T010（变量）→ T011（逻辑）→ T012（注释）
T013（文档）→ T014（测试示例）- 可在T008后开始
T009-T014全部完成后执行验证
```

**CFC示例（US2）**:
```
T015（测试用例）- 可随时执行
T016（XML框架）→ T017（变量）→ T018（逻辑）→ T019（注释）
T020（文档）→ T021（对比说明）- 可在T015后开始
T016-T021全部完成后执行验证
```

### 并行机会

**阶段1（项目设置）**: T002、T003、T004标记[P] - 可并行执行
**阶段2（基础设施）**: T005、T006、T007全部标记[P] - 可并行执行
**阶段3和4**: US1与US2完全独立 - 可完全并行开发
**阶段5（完善）**: T022-T025标记[P] - 可并行执行

---

## 并行执行示例

### 场景1：顺序执行（单人开发）

```
第1周: 阶段1-2（项目设置+基础设施）- 7个任务
第2周: 阶段3（US1: LD示例）- 7个任务
第3周: 阶段4（US2: CFC示例）- 7个任务
第4周: 阶段5（完善）- 6个任务
总时间: 4周
```

### 场景2：并行执行（双人协作）

```
第1周: 阶段1-2（项目设置+基础设施）- 7个任务（两人协作）
第2周: 开发者A: 阶段3（US1: LD）| 开发者B: 阶段4（US2: CFC）- 并行
第3周: 阶段5（完善）- 6个任务（两人协作标记[P]的任务）
总时间: 3周
```

### 场景3：快速MVP（推荐）

```
第1-2天: 阶段1-2（项目设置+基础设施）- 7个任务
第3-4天: 阶段3（仅US1: LD示例）- 7个任务
第5天: 阶段5（部分完善，针对US1）- T022、T023-T027
总时间: 5天交付MVP
```

---

## 实施策略

### MVP优先（推荐路径）

1. **第1周**: 完成阶段1-2（项目设置+基础设施）
2. **第2周**: 完成阶段3（仅US1: LD示例）
3. **交付MVP**: LD示例及完整文档
4. **第3周**: 根据反馈添加阶段4（US2: CFC示例）
5. **第4周**: 完成阶段5（最终完善）

### 增量交付里程碑

- **里程碑1**: 阶段1-2完成 → 项目结构就绪
- **里程碑2**: 阶段3完成 → LD示例可交付（MVP）
- **里程碑3**: 阶段4完成 → CFC示例增加对比学习价值
- **里程碑4**: 阶段5完成 → 生产级文档就绪

---

## 任务统计

- 项目设置: 4个任务
- 基础设施: 3个任务
- US1（LD示例）: 7个任务
- US2（CFC示例）: 7个任务
- 完善验证: 6个任务
- **总计**: 27个任务

**预计时间**: 3-4周（顺序）或 2-3周（并行）

---

## 验证检查清单

功能标记完成前必须验证：

- [ ] 两个XML文件符合PLCopen XML v2.01标准
- [ ] 所有5个测试用例在开发工具中通过
- [ ] 所有中文注释完整（100%覆盖率）
- [ ] 验证UTF-8无BOM编码
- [ ] 验证LF换行符
- [ ] 文档清晰度由非作者检查
- [ ] 快速入门指南经新用户测试
- [ ] 宪章检查通过（全部13项核心原则）

---

## 备注

- **零依赖**: 本项目无运行时依赖，所有文件手动创建
- **工具兼容性**: XML文件经PLCopen schema验证，理论上兼容所有支持PLCopen XML的工具
- **测试方式**: 采用手动测试，需要实际的IEC61131-3开发工具（如CODESYS）
- **文档语言**: 所有文档使用简体中文，符合项目宪章要求
- **可扩展性**: 如需添加减法、乘法等示例，可复用本项目结构
