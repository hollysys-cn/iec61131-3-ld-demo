# 工具兼容性指南

## 概述

本文档说明 IEC61131-3 LD/CFC 加法示例程序与主流工业自动化开发工具的兼容性，帮助用户选择合适的工具导入和测试示例程序。

## PLCopen XML 标准

示例程序采用 **PLCopen XML v2.01** 标准格式，这是一种工业自动化领域广泛支持的程序交换格式。理论上，所有支持 PLCopen XML 标准的工具都可以导入和运行本示例。

### PLCopen XML 优势

- ✅ **厂商中立**：不依赖特定品牌的PLC硬件
- ✅ **跨工具**：可在不同开发环境间迁移
- ✅ **标准化**：遵循 IEC 61131-3 标准
- ✅ **可读性**：基于XML文本格式，便于学习和调试

## 已测试工具

以下工具经过本项目验证，确认兼容性：

### 1. CODESYS (推荐)

| 项目 | 信息 |
|------|------|
| **版本** | CODESYS V3.5 SP19 及以上 |
| **厂商** | 3S-Smart Software Solutions |
| **许可** | 免费版可用（CODESYS Development System） |
| **兼容性** | ✅ 完全支持 PLCopen XML v2.01 |
| **测试状态** | ✅ 已验证（LD和CFC示例均可导入和运行） |
| **下载地址** | https://www.codesys.com/download.html |

**导入步骤**：
1. 打开 CODESYS Development System
2. 创建新项目或打开现有项目
3. 右键点击 "Application" → "Import PLCopen XML..."
4. 选择 `addition.xml` 文件
5. 导入完成后，程序将出现在项目树中

**推荐理由**：
- 免费版功能完整，适合学习
- 中文界面支持较好
- 社区资源丰富，文档齐全

---

### 2. TIA Portal (Siemens)

| 项目 | 信息 |
|------|------|
| **版本** | TIA Portal V17 及以上 |
| **厂商** | Siemens |
| **许可** | 商业授权（需购买或试用版） |
| **兼容性** | ⚠️ 部分支持（需手动调整） |
| **测试状态** | 🔄 理论兼容（未完整测试） |
| **下载地址** | https://support.industry.siemens.com/cs/ |

**兼容性说明**：
- TIA Portal 对 PLCopen XML 的支持有限制
- 可能需要手动调整数据类型和功能块
- LD 梯形图兼容性较好，CFC 可能需要转换

**建议**：如果使用 Siemens PLC，优先使用 TIA Portal 原生项目格式

---

### 3. CX-Programmer (Omron)

| 项目 | 信息 |
|------|------|
| **版本** | CX-One V4.5 及以上 |
| **厂商** | Omron |
| **许可** | 商业授权 |
| **兼容性** | ⚠️ 有限支持（LD较好，CFC受限） |
| **测试状态** | 🔄 理论兼容（未完整测试） |
| **下载地址** | https://industrial.omron.com.cn/cn/products/cx-one |

**兼容性说明**：
- CX-Programmer 主要支持 LD 梯形图
- CFC 功能块图支持有限，可能需要手动重建
- XML 导入功能需在工具选项中启用

---

### 4. 其他工具

| 工具名称 | 厂商 | PLCopen XML 支持 | 推荐度 |
|----------|------|------------------|--------|
| **Studio 5000** | Rockwell Automation | ⚠️ 有限 | ⭐⭐ |
| **TwinCAT** | Beckhoff | ✅ 良好 | ⭐⭐⭐⭐ |
| **MELSOFT** | Mitsubishi | ⚠️ 有限 | ⭐⭐ |
| **Unity Pro** | Schneider Electric | ⚠️ 部分 | ⭐⭐⭐ |

## 验证方法

### 快速兼容性测试

要验证工具是否支持本示例，请按以下步骤测试：

1. **创建测试项目**：在工具中创建一个新的 IEC61131-3 项目
2. **导入 XML**：尝试导入 `examples/ld/addition.xml` 文件
3. **检查导入结果**：
   - ✅ 变量定义是否正确（A, B, Result）
   - ✅ 功能块是否识别（ADD 块）
   - ✅ 逻辑连接是否保持
4. **编译测试**：尝试编译项目，检查是否有错误
5. **运行测试**：设置输入值（A=10, B=20），查看输出（Result应为30）

### 常见导入问题

| 问题 | 原因 | 解决方案 |
|------|------|----------|
| **无法识别 XML 格式** | 工具不支持 PLCopen XML | 使用 CODESYS 或其他兼容工具 |
| **变量类型错误** | INT 类型映射不一致 | 手动调整为工具的 16 位整数类型 |
| **功能块缺失** | ADD 块未识别 | 检查工具的标准函数库是否启用 |
| **中文注释乱码** | 编码格式不兼容 | 确保工具使用 UTF-8 编码打开文件 |

## 在线仿真环境（未来）

**计划中**：未来可能提供基于 Web 的在线仿真环境，无需安装任何工具即可运行示例程序。

**优势**：
- 零安装门槛
- 跨平台访问
- 即时交互验证

**关注项目更新获取最新信息**

## 镜像源配置（中国大陆用户）

如果需要下载开发工具，建议使用国内镜像源或代理以提升下载速度：

- **CODESYS**：官方支持直接下载，速度较好
- **TIA Portal**：可通过西门子中国官网下载
- **其他工具**：联系当地代理商获取安装包

## 反馈与贡献

如果您在其他工具中成功导入和运行了本示例，欢迎反馈：

- 📧 提交 Issue 到项目仓库
- 📝 补充兼容性测试报告
- 🤝 贡献导入指南文档

您的反馈将帮助更多用户受益！

---

## 推荐配置总结

| 使用场景 | 推荐工具 | 理由 |
|----------|----------|------|
| **学习 IEC61131-3** | CODESYS | 免费、功能全、兼容性好 |
| **Siemens PLC 项目** | TIA Portal | 原生工具，最佳支持 |
| **Omron PLC 项目** | CX-Programmer | 原生工具 |
| **纯学术研究** | CODESYS | 开放性最好 |

---

**文档版本**: 1.0
**最后更新**: 2026-01-18
**测试环境**: Windows 10/11
**语言**: 简体中文
